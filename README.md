# Piccolo游戏引擎核心功能开发项目

## 项目概述

本项目是基于Game104课程的代码框架，实现并且研究包括动画系统、物理系统、渲染后处理和工具链等关键组件引擎代码。属于个人学习研究项目

## 已实现功能

### 1. 动画状态机框架

- 实现了`AnimationFSM`类，为角色动画提供了完整的状态管理框架
- 定义了多个动画状态，如空闲、走路开始、跳跃等
- 实现了`update`函数，根据输入信号和当前状态决定下一个状态
- 目前仅有跑步动画，但框架已为未来扩展多种动画状态做好准备

### 2. 高级角色控制器

- 增强了`CharacterController`的功能，提升了角色与环境的交互真实感
- 实现了复杂的碰撞检测和响应机制：
  - 使用`sweep`进行精确碰撞检测
  - 分离处理垂直和水平移动
  - 实现了跳跃到平台、空中碰壁后落地等效果
  - 添加了沿墙滑动机制
- 增加了灵活的跳跃控制：
  - 可调节的跳跃初始速度（`m_jump_initial_speed`）
  - 支持二段跳（`m_enable_double_jump`）
  - 实现了跳跃冷却时间（`m_jump_cooldown`）

### 3. Color Grading后处理

- 在fragment shader中实现了基于3D Look-Up Table (LUT)的Color Grading系统
- 使用`textureSize`动态获取LUT尺寸，适应不同分辨率的LUT
- 实现了高效的3D到2D LUT映射算法
- 精确的颜色空间变换和插值计算，确保平滑的色彩过渡

### 4. 反射系统应用

- 利用引擎的反射系统为新增的组件属性添加反射支持
- 使用`META(Enable)`等标记实现属性的自动反射
- 允许在编辑器中实时调整游戏参数，无需重新编译
- 体现了数据驱动的设计理念

![LUT效果示例1](assets/lut效果%20(4).png)
![LUT效果示例2](assets/lut效果%20(5).png)
![角色碰撞示例](assets/collision.gif)
![反射系统示例](assets/toolchain.gif)
![角色动画示例](assets/Animation.gif)

## 技术栈

- 编程语言：C++
- 图形API：Vulkan
- 着色器语言：GLSL

## 未来计划

- [ ] 扩展动画状态机，实现更多动画状态和平滑过渡
- [ ] 优化物理系统，增加更多环境交互功能
- [ ] 添加更多后处理效果
- [ ] 继续完善工具链，提升开发效率
